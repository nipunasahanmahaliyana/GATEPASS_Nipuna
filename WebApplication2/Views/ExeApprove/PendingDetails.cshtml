@model List<ExeApproveModel>

<style>
    .imgContainer {
        margin-top: 25px;
    }
</style>

<div class="container">
    <h1 class="custom-font" style="font-size: 28px;">Item Details</h1>
</div>

<br />

<div class="card">
    <div class="card-body">

        <h5 class="card-title custom-font">Ref. No: @Model[0].Request_ref_no</h5>
        @foreach (var item in Model)
        {

            <div class="card mb-3">
                <div class="card-body">
                    <div class="row">
                        <div class="col-4">
                            Item ID
                        </div>
                        <div class="col">
                            : @item.Item_id
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-4">
                            Item Serial No
                        </div>
                        <div class="col">
                            : @item.Item_serial_no
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-4">
                            Item Name
                        </div>
                        <div class="col">
                            : @item.Item_name
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-4">
                            Item Description
                        </div>
                        <div class="col">
                            : @item.Item_Description
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-4">
                            Item Quantity
                        </div>
                        <div class="col">
                            : @item.Item_Quantity
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-4">
                            Item Returnable status
                        </div>
                        <div class="col">
                            : @(item.Returnable_status)
                        </div>
                    </div>


                    <div class="container p-0 imgContainer">
                        <div>
                            <button type="button" class="btn btn-primary btn-sm" onclick="toggleItemPhotosForm(@item.Item_id)">View Item Images</button>
                        </div>
                    </div>

                    <div>
                        <br>
                    </div>

                    <div class="container">

                        <form id="itemPhotosForm-@item.Item_id" style="display:none">

                            <div class="form-group">
                                @if (item.Attaches != null && item.Attaches.Length > 0)
                                {

                                    var base64String = Convert.ToBase64String(item.Attaches);
                                    <img src="data:image;base64,@base64String" style="max-width: 35%;" />
                                }
                                else
                                {
                                    <p>No image available</p>
                                }
                            </div>


                        </form>
                        <div class="m-2 float-end">
                            <a asp-action="ExeApprove"><button class="btn btn-sm text-decoration-none btn-secondary">Back to List</button></a>
                        </div>

                    </div>
                </div>
            </div>
        }
    </div>
</div>

<script>
    function toggleItemPhotosForm(itemId) {
        const itemPhotosForm = document.getElementById(`itemPhotosForm-${itemId}`);
        if (itemPhotosForm.style.display === "none" || itemPhotosForm.style.display === "") {
            itemPhotosForm.style.display = "block";
        } else {
            itemPhotosForm.style.display = "none";
        }
    }
</script>








